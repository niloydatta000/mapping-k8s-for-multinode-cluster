# Distributed Kubernetes Cluster Deployment

**Manual, production-style deployment of a multi-node Kubernetes cluster with:**

- Containerd runtime installation

- Kubeadm-based cluster bootstrap

- MetalLB Layer-2 load balancing

- NGINX Ingress exposure

Designed for real cluster internals and running Kubernetes on bare-metal or local networks without cloud providers.

## Repository Structure

```
.
├── install_containerd-kubes.sh
├── MetalLB_Nginx.sh
├── distributed_k8s_cluster.md
└── vLoadBalancer_vIngress.md
```

## Overview

This project provides a fully manual Kubernetes deployment workflow on Ubuntu nodes to ensure deep architectural understanding instead of relying on automation tools.
`distributed_k8s_cluster.md`

**The environment:**

- Ubuntu 24.04 LTS nodes

- Multi-node cluster (master + workers)

- Local Layer-2 networking with virtual LoadBalancer IPs


## Features

1. **Runtime & Core Components Installation**

Script:

```
install_containerd-kubes.sh
```

Installs and configures:

- Containerd runtime

- CRI tools

- kubelet, kubeadm, kubectl

- Systemd cgroup configuration

- Version pinning to prevent unintended upgrades


All packages are installed from official repositories and prepared for cluster bootstrap.

2. **Manual Distributed Cluster Setup**

Guide:

```
distributed_k8s_cluster.md
```

Covers:

- Hostname and /etc/hosts configuration

- Swap disabling and kernel module setup

- Sysctl networking configuration

- kubeadm initialization and node joining

- Cluster verification commands

Provides a step-by-step SOP for building a working control plane and worker nodes manually.

3. **Bare-Metal LoadBalancer & Ingress**

Scripts & documentation:

```
MetalLB_Nginx.sh
vLoadBalancer_vIngress.md
```

Implements:

- Strict ARP configuration in kube-proxy

- [MetalLB](https://github.com/metallb/metallb) deployment with Layer-2 IP pool

- [NGINX Ingress](https://github.com/kubernetes/ingress-nginx) controller installation

- External IP exposure for services


This enables cloud-like LoadBalancer behavior on local infrastructure without external hardware.


## System Requirements

**Minimum recommended per node:**

- **CPU:** 2 vCPU

- **RAM:** 4 GB

- **Storage:** 80 GB

- **Network:** Stable connectivity between nodes

- Cluster communication must not be blocked by firewall rules.


## Quick Start Flow

1. Prepare all nodes

```bash
chmod +x install_containerd-kubes.sh
./install_containerd-kubes.sh
```

2. Initialize control plane (master)

```bash
sudo kubeadm init --pod-network-cidr=10.244.0.0/16
```

Configure kubeconfig and apply CNI as described in the guide.

3. Join worker nodes

Run the kubeadm join command generated by the master.

4. Install MetalLB and NGINX Ingress

```bash
chmod +x MetalLB_Nginx.sh
./MetalLB_Nginx.sh
```

This assigns a virtual external IP to the ingress controllers.


## Architecture Summary

- **Container runtime:** Containerd

- **Bootstrap:** kubeadm

- **Networking:** CNI + sysctl bridge routing

- **External exposure:** MetalLB (Layer-2 ARP)

- **Ingress routing:** NGINX controller


Provides a complete bare-metal Kubernetes stack suitable for labs, home clusters, and on-prem learning.


## Security & Production Notes

- IP pools and CIDRs must be adapted to your network

- Additional hardening required for real production use


## License

Free to use, modify, and distribute.
